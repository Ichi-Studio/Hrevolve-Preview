# 缺陷报告：BB-20260207-003

## 基本信息
- 标题：报销申请允许负金额（缺少输入校验）
- 提交日期：2026-02-07
- 环境：本地 Development；SQLite（hrevolve_test.sqlite）；租户 demo
- 账号/角色：demo_user（普通员工）
- 严重等级（Severity）：S2（数据一致性/财务风险）
- 优先级（Priority）：P0

## 复现步骤
1. 登录获取 token：`POST /api/Auth/login`（demo_user / demo123 / tenant=demo）
2. 获取报销类型：`GET /api/Expenses/types`，取任意 `expenseTypeId`
3. 提交报销申请（负金额）：
   - `POST /api/Expenses/requests`
   - Body（示例）：
     - `expenseTypeId`: `00000000-0000-0000-0000-000000000101`
     - `amount`: `-1`
     - `expenseDate`: `2026-02-01`
     - `currency`: `CNY`
     - `description`: `negative`
     - `items`: `[{"receiptUrl":"/demo-assets/receipts/receipt-001.svg"}]`

## 实际结果
- HTTP 200
- 返回创建成功且 amount=-1 被持久化/回显，例如：
  - `"amount":-1`
  - `"status":"Pending"`

## 预期结果
- HTTP 400（或 422）
- 返回字段级校验错误，明确提示 `amount` 必须为正数（或 >= 0，视业务规则）。

## 影响范围
- 影响模块：报销/财务
- 风险：
  - 允许负金额会导致统计、审批、对账与薪酬联动等出现异常
  - 若后续存在自动打款/对接，可能引入资损风险

## 证据
- status=200
- 响应体片段：
  - `{"id":"a3acb69a-1859-4ce4-b94a-a4aff5d9e5a9",...,"amount":-1,...,"status":"Pending",...}`

## 关联项
- 关联需求ID：NFR-SEC-003（输入校验）/ FR-EXP-002（金额边界）
- 关联用例ID：TC-NFR-002
